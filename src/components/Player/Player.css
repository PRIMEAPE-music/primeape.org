.player {
  width: 100%;
  max-width: 1400px; /* Increased to accommodate floating boxes */
  margin: 0 auto;
  padding: var(--space-xl) var(--space-lg);
  display: flex;
  flex-direction: column;
  gap: var(--space-xs); /* Reduced from space-sm (16px) to space-xs (8px) */
}

/* Ensure player doesn't get squished on small screens */
@media (max-width: 768px) {
  .player {
    padding: var(--space-md);
  }
}

/* Hidden audio element */
.player audio {
  display: none;
}

.player__secondary-controls {
  display: flex;
  align-items: center;
  justify-content: center; /* Changed from space-between */
  gap: var(--space-lg); /* Increased from space-md (24px) to space-lg (32px) */
  padding: var(--space-xs) 0; /* Reduced from space-sm */
  max-width: 600px; /* Constrain width to prevent excessive spreading */
  margin: 0 auto; /* Center the controls container */
}

.player__version-row {
  display: flex;
  justify-content: center;
  padding: var(--space-xs) 0; /* Reduced from space-sm */
  margin-top: var(--space-xs); /* Add slight top margin for separation */
}

/* ============================================================================
   PLAYER MAIN AREA - FLOATING BOX LAYOUT
   ============================================================================ */

.player__main-area {
  display: grid;
  grid-template-columns: 403.5px 1fr 403.5px; /* Equal side columns */
  gap: var(--space-xl);
  padding: var(--space-xl) 0;
  position: relative;
  min-height: 500px;
  align-items: start;
  justify-items: center;
}

/* ============================================================================
   CENTER COLUMN - ARTWORK + TRACK INFO + TIME + WAVEFORM
   ============================================================================ */

.player__center-column {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--space-xs); /* 8px spacing - REDUCED for tighter layout */
  width: 100%;
  max-width: 500px;
  justify-self: center; /* Centers column in grid cell */
  margin: 0 auto; /* Additional centering insurance */
}

/* Ensure center column is properly sized on desktop */
@media (min-width: 1100px) {
  .player__center-column {
    flex-shrink: 0; /* Prevent shrinking when lyrics panel is shown */
  }
}

/* ============================================================================
   FLOATING BOX CONTAINERS
   ============================================================================ */

.player__floating-box {
  flex-shrink: 0;
  align-self: start;
  margin-top: -100px; /* Negative margin pulls panels UP */
}

/* Hide floating boxes on tablet and mobile */
@media (max-width: 1099px) {
  .player__floating-box {
    display: none !important;
  }
}

/* Show floating boxes on desktop */
@media (min-width: 1100px) {
  .player__floating-box {
    display: block;
  }

  /* Tracklist box - LEFT side */
  .player__floating-box--tracklist {
    width: 100%; /* Fill the grid cell (403.5px) */
    max-width: 380px; /* But constrain to original size */
    height: 500px; /* REDUCED from 750px */
    order: -1; /* Ensure tracklist appears first (LEFT) */
  }

  /* Lyrics box - RIGHT side */
  .player__floating-box--lyrics {
    order: 1; /* Ensure lyrics appears last (RIGHT) */
  }

  /* Artwork naturally centers */
  .player__main-area .artwork {
    align-self: center;
  }
}

/* ============================================================================
   MOBILE/TABLET LYRICS PANEL
   ============================================================================ */

.player__mobile-lyrics-panel {
  display: none;
}

/* Show mobile panel on tablet and mobile when lyrics are visible */
@media (max-width: 1099px) {
  .player__mobile-lyrics-panel {
    display: block;
  }

  .player__main-area {
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: auto;
    gap: var(--space-md);
    grid-template-columns: none;
  }
}

/* Desktop: hide mobile panel */
@media (min-width: 1100px) {
  .player__mobile-lyrics-panel {
    display: none;
  }
}

/* ============================================================================
   RESPONSIVE ADJUSTMENTS
   ============================================================================ */

@media (max-width: 1099px) {
  .player {
    max-width: var(--player-max-width);
    padding: var(--space-lg) var(--space-md);
  }
}

@media (max-width: 768px) {
  .player {
    padding: var(--space-md);
  }

  .player__main-area {
    padding: var(--space-md) 0;
  }
}